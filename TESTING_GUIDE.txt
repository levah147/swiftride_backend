================================================================================
        SWIFTRIDE API - MANUAL TESTING GUIDE
================================================================================

üìã PREREQUISITE: Server must be running on http://localhost:8000

================================================================================
TEST 1: USER CREATION VIA OTP
================================================================================

Step 1: Send OTP Request
-------------------------
Run this command in your terminal:

python -c "import requests; r = requests.post('http://localhost:8000/api/auth/send-otp/', json={'phone_number': '08199887766', 'first_name': 'John', 'last_name': 'Doe'}); print(r.json())"

Expected Response:
{
  "message": "OTP sent successfully",
  "expires_in": 600
}

Step 2: Check Server Console for OTP
-------------------------------------
Look at your Django server console output. You should see something like:

============================================================
üì± OTP SMS (CONSOLE)
To: +2348199887766
Code: 123456
============================================================

Step 3: Verify OTP and Create User
-----------------------------------
Replace 123456 with the actual OTP from console:

python -c "import requests; r = requests.post('http://localhost:8000/api/auth/verify-otp/', json={'phone_number': '08199887766', 'otp': '123456'}); print(r.json())"

Expected Response:
{
  "message": "Phone verified successfully",
  "user": {
    "id": ...,
    "phone_number": "+2348199887766",
    "first_name": "John",
    "last_name": "Doe"
  },
  "tokens": {
    "access": "eyJ0eXAiOiJKV1QiLCJhbGc...",
    "refresh": "eyJ0eXAiOiJKV1QiLCJ..."
  }
}

‚úÖ USER CREATED! Save the access token for next step.


================================================================================
TEST 2: DRIVER APPLICATION
================================================================================

Step 1: Apply to Become a Driver
---------------------------------
Replace YOUR_ACCESS_TOKEN with the token from previous step:

python -c "import requests; r = requests.post('http://localhost:8000/api/drivers/apply/', json={'driver_license_number': 'DL12345678', 'driver_license_expiry': '2026-12-31', 'vehicle_type': 'car', 'vehicle_color': 'Black', 'license_plate': 'ABC-123-XY', 'vehicle_year': 2020}, headers={'Authorization': 'Bearer YOUR_ACCESS_TOKEN'}); print(r.json())"

Expected Response:
{
  "message": "Driver application submitted successfully",
  "driver": {
    "id": ...,
    "status": "pending",
    "driver_license_number": "DL12345678",
    ...
  },
  "vehicle": {
    "license_plate": "ABC-123-XY",
    "vehicle_type": "car",
    ...
  }
}

‚úÖ DRIVER APPLICATION SUBMITTED!


================================================================================
ALTERNATIVE: Use the Interactive Script
================================================================================

I've created an interactive script that will guide you through both tests:

python test_user_driver.py

This script will:
1. Send OTP
2. Ask you to check console for OTP
3. Let you enter the OTP
4. Verify OTP and create user
5. Apply to become a driver
6. Show all results

================================================================================
VERIFICATION STEPS
================================================================================

After running the tests, verify in Django admin:

1. Check Users:
   http://localhost:8000/admin/accounts/user/
   ‚Üí Should see new user: John Doe (+2348199887766)

2. Check Drivers:
   http://localhost:8000/admin/drivers/driver/
   ‚Üí Should see driver application with status "pending"

3. Check Vehicles:
   http://localhost:8000/admin/vehicles/vehicle/
   ‚Üí Should see vehicle: ABC-123-XY (Black car)

4. Check Wallet:
   http://localhost:8000/admin/payments/wallet/
   ‚Üí Should see wallet created for user (balance: ‚Ç¶0.00)


================================================================================
TROUBLESHOOTING
================================================================================

‚ùå Error: "OTP already sent. Please wait..."
‚Üí Solution: Use a different phone number or wait 2 minutes

‚ùå Error: "Invalid OTP"
‚Üí Solution: Make sure you copied the exact OTP from console

‚ùå Error: "This license plate is already registered"
‚Üí Solution: Change the license_plate value

‚ùå Error: "Authentication credentials were not provided"
‚Üí Solution: Make sure you included the Bearer token correctly


================================================================================
NEXT STEPS AFTER TESTING
================================================================================

Once driver is created, you can test:

1. Driver Approval (Admin):
   - Go to admin ‚Üí Drivers
   - Select the driver
   - Change status to "approved"
   - Save

2. Check Driver Status:
   python -c "import requests; r = requests.get('http://localhost:8000/api/drivers/status/', headers={'Authorization': 'Bearer YOUR_TOKEN'}); print(r.json())"

3. Upload Driver Documents:
   (Coming in next test phase)

4. Start Accepting Rides:
   (Coming in next test phase)


================================================================================
